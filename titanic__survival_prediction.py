# -*- coding: utf-8 -*-
"""Titanic _survival_prediction

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1akOD7EqLQTwC1VkfpyQ8xR1aSYHlO-nY
"""

data = pd.read_csv('/content/drive/MyDrive/Assignment/tested.csv')

# importing the libraries

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import  seaborn as sns

data.head()



data.describe()

data.info()

data.isnull().sum()

# dropping cabin column

dataa = data.drop(columns = 'Cabin', axis = 1) # axis = 1 because here we are removing the column

dataa



dataa.shape

# replaicng the missing value in "Age" with mean.

dataa['Age'].fillna(dataa['Age'].mean(), inplace = True)

# finding the mode value of 'Embark' column
print(dataa['Embarked'].mode())  # who is repeating the many times

# replaicng the  missing value of embarked with mode calculation of embarked column

dataa['Embarked'].fillna(dataa['Embarked'].mode(), inplace = True)

# missing value for fare columnn
dataa['Fare'].fillna(dataa['Fare'].mean(), inplace = True)

dataa.isnull().sum()

dataa.isnull().sum().sum()   # here is no null value in any column

# finding the numbver of person survived or not
dataa['Survived'].value_counts()

nmale = len(data[data['Sex']=='male'])
nmale

nfemale = len(data[data['Sex']=='female'])
nfemale

sns.set_style('darkgrid')
sns.countplot(x = 'Survived', hue = 'Sex', data = data )

max_age_person = data['Age'].max()
max_age_person     # maximum age people

min_age_person = data['Age'].min()
min_age_person

plt.bar(['male', 'Female'], [nmale, nfemale])
plt.ylim(0,300)
plt.xlabel('Sex')
plt.ylabel('Passenger''s Number')
plt.title('Comparision')
plt.show()

child_info = data[data['Age'] < 15]

child_info.head()

print(child_info)

sns.set_style('whitegrid')
sns.countplot(x='Survived', hue='Sex', data = child_info)

len_child_info= len(child_info)

print(len_child_info)

child_male = len(child_info[child_info['Sex']=='male'])
print(child_male)

child_female = len(child_info[child_info['Sex']=='female'])
print(child_female)

calculation = data[(data['Survived'] == 0) & (data['Sex'] == 'male')]
total_rows = calculation.shape[0]

total_rows

calculation = data[(data['Survived'] == 1) & (data['Sex'] == 'female')]
total_rows = calculation.shape[0]

total_rows

# means  total - 266 male and 152 female

sns.set_style('whitegrid')
sns.countplot(x='Survived', hue = 'Pclass', data = data, palette = 'colorblind')

sns.distplot(data['Age'].dropna(), bins=50)

# clean the data for categorical features

data.info()

dataa['Sex'].value_counts()

dataa['Embarked'].value_counts()

# canverting categorical data   for male = 0 and female = 1

dataa.replace({'Sex':{'male':0, 'female':1}, 'Embarked':{'S':0, 'C':1, 'Q':2}}, inplace = True)

dataa.head()

# separating the features and target

X = dataa.drop(columns = ['PassengerId', 'Name', 'Ticket', 'Survived'], axis = 1)
 # no use of this column then droppping to it .

Y = dataa['Survived']

print(X)

print(Y)

# spilliting the training and test

X_train, X_test, Y_train, Y_test = train_test_split(X,Y, test_size = 0.25, random_state = 2)

print(X.shape, X_train.shape, X_test.shape)

from sklearn.linear_model import LogisticRegression
from sklearn.metrics import accuracy_score

# logistic regression
model = LogisticRegression()

model.fit(X_train, Y_train)

# evaluate the model

X_train_prediction=model.predict(X_train)

print(X_train_prediction)

training_data_checking = accuracy_score(Y_train,X_train_prediction )

print('Accuracy' , training_data_checking )

# accuracy on test

X_test_prediction = model.predict(X_test)

print(X_test_prediction)

testing_data_checking = accuracy_score(Y_test,X_test_prediction )

print(testing_data_checking)

# both testing and training are equal

from sklearn.metrics import confusion_matrix, classification_report
confu_mat=confusion_matrix(Y_test, X_test_prediction )
print(confu_mat)

print(classification_report(Y_test, X_test_prediction ))

dataa.head()

dataa.head(25)

dataa.count()

# then my anaysis is - survival is based on the gender and age
# female passenger has higher chances of survival more then a male passengers .
#